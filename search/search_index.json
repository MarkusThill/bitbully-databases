{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"<p>\ud83d\udcda BitBully Databases</p> <p></p> <p>BitBully Databases provide precomputed Connect-4 opening books containing millions of evaluated positions and scores. Each database stores Huffman-encoded board states with their corresponding evaluation values (win/loss or distance to win/loss). They are packaged as binary assets and can be accessed directly through the <code>bitbully_databases</code> module.</p> <p>This package includes a pure-Python implementation (no NumPy dependency) that demonstrates how to read, search, and interpret these databases. For performance-critical applications, prefer the optimized BitBully C++/pybind11 API.</p>"},{"location":"#available-databases","title":"\ud83d\uddc2\ufe0f Available Databases","text":"Name File Ply Depth Entries Contains Win Distances Disk Size In-Memory Size (Python) Description 8-ply <code>book_8ply.dat</code> 8 34 515 \u2717 102 KB 277 336 B (~271 KB) Smallest opening book, containing all unique positions up to 8 moves. Stores only win/loss outcomes without distances. 12-ply <code>book_12ply.dat</code> 12 1 735 945 \u2717 6.7 MB 15 225 112 B (~14.9 MB) Covers all positions up to 12 plies (\u2248 1.7 M). Stores only win/loss outcomes (\u22121 = loss, 0 = draw, 1 = win). 12-ply-dist (default) <code>book_12ply_distances.dat</code> 12 4 200 899 \u2713 21 MB 34 724 184 B (~33.1 MB) The most detailed book. Extends 12-ply by including signed distance values indicating how many moves remain until a win or loss. Recommended for research and analysis. <p>All databases are sorted by Huffman-encoded position keys for efficient binary-search lookup.</p>"},{"location":"#pure-python-implementation-educational-and-non-performance-critical","title":"Pure-Python Implementation \u2014 Educational and Non-Performance Critical","text":"<p>The pure-Python interface provided in this package emphasizes clarity over speed and demonstrates the logic behind BitBully\u2019s databases:</p> <ul> <li>Huffman encoding of Connect-4 positions</li> <li>Binary search over sorted position\u2013score pairs</li> <li>Horizontal mirroring for symmetry</li> <li>Some other simple utility functions</li> </ul> <p>For solvers, reinforcement-learning agents, or large-scale simulations, use the  BitBully C++/pybind11 implementation provided by the main BitBully package.</p>"},{"location":"CHANGELOG/","title":"Changelog","text":""},{"location":"CHANGELOG/#v002-a1-2025-11-16","title":"v0.0.2-a1 (2025-11-16)","text":""},{"location":"CHANGELOG/#fix","title":"Fix","text":"<ul> <li>moved changelog to docs</li> <li>set the default database</li> </ul>"},{"location":"CHANGELOG/#v002-a0-2025-11-03","title":"v0.0.2-a0 (2025-11-03)","text":""},{"location":"CHANGELOG/#fix_1","title":"Fix","text":"<ul> <li>debug docs workflow</li> </ul>"},{"location":"CHANGELOG/#v001-2025-11-02","title":"v0.0.1 (2025-11-02)","text":""},{"location":"CHANGELOG/#v001-a8-2025-11-02","title":"v0.0.1-a8 (2025-11-02)","text":""},{"location":"CHANGELOG/#fix_2","title":"Fix","text":"<ul> <li>added several tests</li> </ul>"},{"location":"CHANGELOG/#v001-a7-2025-11-02","title":"v0.0.1-a7 (2025-11-02)","text":""},{"location":"CHANGELOG/#fix_3","title":"Fix","text":"<ul> <li>added a python class to access the databases</li> </ul>"},{"location":"CHANGELOG/#v001-a6-2025-11-02","title":"v0.0.1-a6 (2025-11-02)","text":""},{"location":"CHANGELOG/#fix_4","title":"Fix","text":"<ul> <li>test on more python versions</li> </ul>"},{"location":"CHANGELOG/#v001-a5-2025-11-02","title":"v0.0.1-a5 (2025-11-02)","text":""},{"location":"CHANGELOG/#fix_5","title":"Fix","text":"<ul> <li>test on more python versions</li> </ul>"},{"location":"CHANGELOG/#v001-a4-2025-11-02","title":"v0.0.1-a4 (2025-11-02)","text":""},{"location":"CHANGELOG/#fix_6","title":"Fix","text":"<ul> <li>test on more python versions</li> </ul>"},{"location":"CHANGELOG/#v001-a3-2025-11-02","title":"v0.0.1-a3 (2025-11-02)","text":""},{"location":"CHANGELOG/#v001-a2-2025-11-02","title":"v0.0.1-a2 (2025-11-02)","text":""},{"location":"CHANGELOG/#fix_7","title":"Fix","text":"<ul> <li>added a dummy test</li> </ul>"},{"location":"CHANGELOG/#v001-a1-2025-11-02","title":"v0.0.1-a1 (2025-11-02)","text":""},{"location":"CHANGELOG/#fix_8","title":"Fix","text":"<ul> <li>fixed guthub workflow</li> </ul>"},{"location":"CHANGELOG/#v001-a0-2025-11-02","title":"v0.0.1-a0 (2025-11-02)","text":""},{"location":"CHANGELOG/#fix_9","title":"Fix","text":"<ul> <li>initial commit</li> </ul>"},{"location":"getting_started/","title":"Getting Started","text":""},{"location":"getting_started/#installing-bitbully-databases","title":"Installing BitBully Databases","text":"<p>Install <code>bitbully-databases</code> via pip:</p> LatestVersion x.y.z <pre><code>pip install bitbully-databases\n</code></pre> <pre><code>pip install bitbully-databases==x.y.z\n</code></pre>"},{"location":"getting_started/#usage","title":"Usage","text":"<pre><code>import bitbully_databases as bbd\n\n# Load the 12-ply book with distances (default)\ndb = bbd.BitBullyDatabases(\"12-ply-dist\")\n\n# Get the absolute file path of the packaged database\npath = bbd.BitBullyDatabases.get_database_path(\"12-ply-dist\")\nprint(\"Database path:\", path)\n\n# Check database metadata\nprint(\"Book size:\", db.get_book_size())\nprint(\"Memory size (bytes):\", db.get_book_memory_size())\nprint(\"Contains win distances:\", db.has_win_distances())\n\n# Example Connect-4 board (bottom \u2192 top)\n# Player 1 (yellow, X) will eventually win\nboard = [\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 1, 0, 0, 0],\n    [0, 1, 0, 2, 0, 0, 0],\n    [0, 2, 0, 1, 0, 2, 0],\n    [0, 1, 0, 2, 0, 1, 0],\n    [0, 2, 0, 1, 0, 2, 0],\n]\n\n# Retrieve the evaluation score for the board\nvalue = db.get_book_value(board)\nprint(\"Book value:\", value)\nif value is not None and db.has_win_distances():\n    print(f\"\u2192 Player 1 wins in {100 - abs(value)} moves.\")\n\n# Display whether the database uses distances and the type of book\nprint(\"Has win distances:\", db.has_win_distances())\n</code></pre>"},{"location":"getting_started/#8-ply-database-basic-winloss-information","title":"8-Ply Database \u2014 Basic Win/Loss Information","text":"<pre><code>board = [\n    [0,0,0,0,0,0,0],\n    [0,0,0,1,0,0,0],\n    [0,0,0,2,0,0,0],\n    [0,2,0,1,0,0,0],\n    [0,1,0,2,0,0,0],\n    [0,2,0,1,0,0,0],\n]\n\nval = bbd.BitBullyDatabases(\"8-ply\").get_book_value(board)\nprint(val)  # \u2192 1 (Player 1 win)\n</code></pre>"},{"location":"getting_started/#12-ply-database-basic-winloss-information","title":"12-Ply Database \u2014 Basic Win/Loss Information","text":"<pre><code>board = [\n    [0,0,0,0,0,0,0],\n    [0,0,0,0,0,0,0],\n    [0,0,1,1,0,0,0],\n    [0,0,2,2,0,0,0],\n    [0,0,2,1,2,0,0],\n    [0,1,1,2,1,2,0],\n]\n\nval = bbd.BitBullyDatabases(\"12-ply\").get_book_value(board)\nprint(val)  # \u2192 0 (draw)\n</code></pre>"},{"location":"getting_started/#12-ply-dist-database-winloss-with-distance-values","title":"12-Ply-Dist Database \u2014 Win/Loss With Distance Values","text":"<pre><code>board = [\n    [0,0,0,0,0,0,0],\n    [0,0,0,1,0,0,0],\n    [0,1,0,2,0,0,0],\n    [0,2,0,1,0,2,0],\n    [0,1,0,2,0,1,0],\n    [0,2,0,1,0,2,0],\n]\n\nval = bbd.BitBullyDatabases(\"12-ply-dist\").get_book_value(board)\nprint(val)  # \u2192 71 (Player 1 wins in 100 \u2212 71 = 29 moves)\n</code></pre>"},{"location":"python/","title":"BitBully API Reference","text":""},{"location":"python/#main","title":"Main","text":"<p>Module for BitBully Databases (no NumPy dependency).</p> <p>This module demonstrates how to read, search, and evaluate binary files containing Connect-4 positions and scores using pure Python (no NumPy). For efficient/production use, prefer the BitBully C++/pybind11 API.</p>"},{"location":"python/#src.bitbully_databases.bitbully_databases.BitBullyDatabases","title":"<code>BitBullyDatabases</code>","text":"<p>Access and query packaged BitBully opening databases.</p> <p>This class provides a simple, pure-Python interface for exploring and analyzing BitBully database files containing Connect-4 positions and evaluation scores.</p> <p>In typical use, you will only need the static method <code>get_database_path()</code> to retrieve the path to a packaged database file.</p> <p>The remaining methods (e.g., <code>readline</code>, <code>read_book</code>, <code>binary_search</code>, <code>to_huffman</code>, <code>get_book_value</code>) are provided for illustration and educational purposes only. They demonstrate the binary format and logic of BitBully database files in a transparent, Pythonic way.</p> <p>For performance-critical or production use, rely instead on the official BitBully API, which implements the same functionality in optimized C++ and exposes it to Python via pybind11. The C++ implementation is substantially faster and more memory-efficient than the pure-Python examples shown here.</p> Example <p>Get the score for a known position with exactly 12 tokens in the 12-ply-dist database. Player 1 (yellow, X) can win in 29 moves. <pre><code>import bitbully_databases as bbd\n\nopeningbook = bbd.BitBullyDatabases(db_name=\"12-ply-dist\")\n\n# Example position: a known position in the 12-ply and 12-ply-dist opening books\n# Expected score is 71 for player 1 (yellow, X) to win in (100-71) = 29 moves\nboard = [\n    [0, 0, 0, 0, 0, 0, 0],  #\n    [0, 0, 0, 1, 0, 0, 0],  #\n    [0, 1, 0, 2, 0, 0, 0],  #\n    [0, 2, 0, 1, 0, 2, 0],  #\n    [0, 1, 0, 2, 0, 1, 0],  #\n    [0, 2, 0, 1, 0, 2, 0],  #\n]\nexpected_value = 71\nval = openingbook.get_book_value(board)\nassert val == expected_value\n</code></pre></p> Example <p>Get the score for another  position with exactly 12 tokens in the 12-ply-dist database. Player 1 (yellow, X) will lose in 12 moves. <pre><code>import bitbully_databases as bbd\n\nopeningbook = bbd.BitBullyDatabases(db_name=\"12-ply-dist\")\n\n# Example position F: a known position in the 12-ply and 12-ply-dist opening books\n# Expected score is -88 for player 1 (yellow, X) to lose in (100-88) = 12 moves\nboard = [\n    [0, 0, 0, 0, 0, 0, 0],  #\n    [0, 0, 0, 0, 0, 0, 0],  #\n    [0, 0, 1, 1, 0, 0, 0],  #\n    [0, 0, 2, 2, 0, 0, 0],  #\n    [0, 1, 2, 1, 0, 0, 0],  #\n    [0, 1, 1, 2, 0, 2, 2],\n]\nexpected_value = -88\nval = openingbook.get_book_value(board)\nassert val == expected_value\n</code></pre></p> <p>For further examples, see <code>get_book_value()</code>.</p> Source code in <code>src/bitbully_databases/bitbully_databases.py</code> <pre><code>class BitBullyDatabases:\n    \"\"\"Access and query packaged BitBully opening databases.\n\n    This class provides a simple, pure-Python interface for exploring and analyzing\n    BitBully database files containing Connect-4 positions and evaluation scores.\n\n    In typical use, you will only need the static method\n    [`get_database_path()`][src.bitbully_databases.bitbully_databases.BitBullyDatabases.get_database_path]\n    to retrieve the path to a packaged database file.\n\n    The remaining methods (e.g., `readline`, `read_book`, `binary_search`,\n    `to_huffman`, `get_book_value`) are provided for **illustration and\n    educational purposes** only. They demonstrate the binary format and logic of\n    BitBully database files in a transparent, Pythonic way.\n\n    For performance-critical or production use, rely instead on the official\n    [BitBully API](https://github.com/MarkusThill/BitBully), which implements the\n    same functionality in optimized C++ and exposes it to Python via **pybind11**.\n    The C++ implementation is substantially faster and more memory-efficient than\n    the pure-Python examples shown here.\n\n    Example:\n        Get the score for a known position with exactly 12 tokens in the 12-ply-dist database.\n        Player 1 (yellow, X) can win in 29 moves.\n        ```python\n        import bitbully_databases as bbd\n\n        openingbook = bbd.BitBullyDatabases(db_name=\"12-ply-dist\")\n\n        # Example position: a known position in the 12-ply and 12-ply-dist opening books\n        # Expected score is 71 for player 1 (yellow, X) to win in (100-71) = 29 moves\n        board = [\n            [0, 0, 0, 0, 0, 0, 0],  #\n            [0, 0, 0, 1, 0, 0, 0],  #\n            [0, 1, 0, 2, 0, 0, 0],  #\n            [0, 2, 0, 1, 0, 2, 0],  #\n            [0, 1, 0, 2, 0, 1, 0],  #\n            [0, 2, 0, 1, 0, 2, 0],  #\n        ]\n        expected_value = 71\n        val = openingbook.get_book_value(board)\n        assert val == expected_value\n        ```\n\n    Example:\n        Get the score for another  position with exactly 12 tokens in the 12-ply-dist database.\n        Player 1 (yellow, X) will lose in 12 moves.\n        ```python\n        import bitbully_databases as bbd\n\n        openingbook = bbd.BitBullyDatabases(db_name=\"12-ply-dist\")\n\n        # Example position F: a known position in the 12-ply and 12-ply-dist opening books\n        # Expected score is -88 for player 1 (yellow, X) to lose in (100-88) = 12 moves\n        board = [\n            [0, 0, 0, 0, 0, 0, 0],  #\n            [0, 0, 0, 0, 0, 0, 0],  #\n            [0, 0, 1, 1, 0, 0, 0],  #\n            [0, 0, 2, 2, 0, 0, 0],  #\n            [0, 1, 2, 1, 0, 0, 0],  #\n            [0, 1, 1, 2, 0, 2, 2],\n        ]\n        expected_value = -88\n        val = openingbook.get_book_value(board)\n        assert val == expected_value\n        ```\n\n    For further examples, see\n    [`get_book_value()`][src.bitbully_databases.bitbully_databases.BitBullyDatabases.get_book_value].\n    \"\"\"\n\n    def __init__(self, db_name: Literal[\"default\", \"8-ply\", \"12-ply\", \"12-ply-dist\"] | None = None) -&gt; None:\n        \"\"\"Initialize an instance and (optionally) load a database.\n\n        Args:\n            db_name (Literal[\"default\", \"8-ply\", \"12-ply\", \"12-ply-dist\"] | None):\n                Database to load. Accepted values:\n                - \"default\": 12-ply with distances\n                - \"8-ply\": 8-ply without distances\n                - \"12-ply\": 12-ply without distances\n                - \"12-ply-dist\": 12-ply with distances\n                - None: do not load anything\n        \"\"\"\n        self.db_name = db_name\n        self.book: list[tuple[int, int]] | None = None\n        self.with_distances: bool = False\n        if db_name is not None:\n            db_path = Path(BitBullyDatabases.get_database_path(db_name))\n            self.with_distances = db_name in [\"default\", \"12-ply-dist\"]\n            self.is_8ply = db_name == \"8-ply\"\n            self.book = BitBullyDatabases._read_book(\n                file=db_path,\n                with_distances=self.with_distances,\n                is_8ply=self.is_8ply,\n            )\n\n    @staticmethod\n    def get_database_path(db_name: Literal[\"default\", \"8-ply\", \"12-ply\", \"12-ply-dist\"] = \"default\") -&gt; str:\n        \"\"\"Return the packaged file path for a given database name.\n\n        Args:\n            db_name (Literal[\"default\", \"8-ply\", \"12-ply\", \"12-ply-dist\"]):\n                Database identifier.\n\n        Returns:\n            str: Absolute path to the packaged binary database file.\n\n        Raises:\n            ValueError: If `db_name` is not one of the supported values.\n\n        Example:\n            ```python\n            import bitbully_databases as bbd\n\n            db_path = bbd.BitBullyDatabases.get_database_path(\"12-ply-dist\")\n            print(db_path)\n            # Outputs the absolute path to 'book_12ply_distances.dat'\n            ```\n        \"\"\"\n        if db_name == \"default\":\n            db_path = files(\"bitbully_databases\").joinpath(\"assets/book_12ply_distances.dat\")\n        elif db_name == \"8-ply\":\n            db_path = files(\"bitbully_databases\").joinpath(\"assets/book_8ply.dat\")\n        elif db_name == \"12-ply\":\n            db_path = files(\"bitbully_databases\").joinpath(\"assets/book_12ply.dat\")\n        elif db_name == \"12-ply-dist\":\n            db_path = files(\"bitbully_databases\").joinpath(\"assets/book_12ply_distances.dat\")\n        else:\n            raise ValueError(\n                f\"Unknown database name: {db_name}. Allowed: Literal['default','8-ply','12-ply','12-ply-dist']\"\n            )\n        with as_file(db_path) as f:\n            return str(f)\n\n    def get_book_value(self, board: Board) -&gt; int | None:\n        \"\"\"Retrieve the score for a given board position.\n\n        Note:\n            Pure-Python lookup is for demonstration; prefer the C++/pybind11 API for performance.\n\n        Args:\n            board (Board):\n                Board matrix shaped rows x cols (e.g., 6 x 7). Entries:\n                0=end-of-column sentinel when scanning bottom\u2192top, 1=player1, else=player2.\n\n        Returns:\n            int | None:\n                Score from the book. If the database stores distances\n                (`with_distances=True`), returns the stored signed distance or `None`\n                if the position is not present. If it does *not* store distances,\n                returns 1 when the position is not present (convention: P1 wins)\n                or the stored value if present.\n\n        Raises:\n            ValueError: If no database is loaded.\n\n        Example:\n            **Example 1 \u2014 12-ply-dist (Player 1 wins in 29 moves):**\n            ```python\n            import bitbully_databases as bbd\n\n            # Example position: a known position in the 12-ply and 12-ply-dist opening books\n            # Expected score is 71 for player 1 (yellow, X) to win in (100-71) = 29 moves\n            board = [\n                [0, 0, 0, 0, 0, 0, 0],  #\n                [0, 0, 0, 1, 0, 0, 0],  #\n                [0, 1, 0, 2, 0, 0, 0],  #\n                [0, 2, 0, 1, 0, 2, 0],  #\n                [0, 1, 0, 2, 0, 1, 0],  #\n                [0, 2, 0, 1, 0, 2, 0],  #\n            ]\n            expected_value = 71\n            val = bbd.BitBullyDatabases(db_name=\"12-ply-dist\").get_book_value(board)\n            assert val == expected_value\n            ```\n\n        Example:\n            **Example 2 \u2014 8-ply (Basic win/loss database)**\n            ```python\n            import bitbully_databases as bbd\n\n            board = [\n                [0, 0, 0, 0, 0, 0, 0],\n                [0, 0, 0, 1, 0, 0, 0],\n                [0, 0, 0, 2, 0, 0, 0],\n                [0, 2, 0, 1, 0, 0, 0],\n                [0, 1, 0, 2, 0, 0, 0],\n                [0, 2, 0, 1, 0, 0, 0],\n            ]\n            val = bbd.BitBullyDatabases(\"8-ply\").get_book_value(board)\n            print(val)  # 1 \u2192 Player 1 wins\n            ```\n\n        Example:\n            **Example 3 \u2014 8-ply (Draw position)**\n            ```python\n            import bitbully_databases as bbd\n\n            board = [\n                [0, 0, 0, 0, 0, 0, 0],\n                [0, 0, 0, 2, 0, 0, 0],\n                [0, 0, 0, 1, 0, 0, 0],\n                [0, 0, 0, 2, 0, 0, 0],\n                [0, 0, 0, 1, 0, 2, 0],\n                [0, 0, 1, 2, 0, 1, 0],\n            ]\n            val = bbd.BitBullyDatabases(\"8-ply\").get_book_value(board)\n            print(val)  # 0 \u2192 Draw\n            ```\n\n        Example:\n            **Example 4 \u2014 12-ply (Draw position)**\n            ```python\n            import bitbully_databases as bbd\n\n            board = [\n                [0, 0, 0, 0, 0, 0, 0],\n                [0, 0, 0, 0, 0, 0, 0],\n                [0, 0, 1, 1, 0, 0, 0],\n                [0, 0, 2, 2, 0, 0, 0],\n                [0, 0, 2, 1, 2, 0, 0],\n                [0, 1, 1, 2, 1, 2, 0],\n            ]\n            val = bbd.BitBullyDatabases(\"12-ply\").get_book_value(board)\n            print(val)  # 0 \u2192 Draw\n            ```\n\n        Example:\n            **Example 5 \u2014 12-ply-dist (Player 1 wins in 27 moves)**\n            ```python\n            import bitbully_databases as bbd\n\n            board = [\n                [0, 0, 0, 0, 0, 0, 0],\n                [0, 0, 0, 0, 0, 0, 0],\n                [0, 1, 0, 0, 0, 0, 0],\n                [0, 2, 2, 0, 1, 0, 0],\n                [0, 2, 1, 0, 2, 0, 0],\n                [1, 1, 2, 1, 2, 0, 0],\n            ]\n            val = bbd.BitBullyDatabases(\"12-ply-dist\").get_book_value(board)\n            print(val)  # 73 \u2192 Player 1 wins in 27 moves\n            ```\n\n        Example:\n            **Example 6 \u2014 12-ply-dist (Player 1 loses in 12 moves)**\n            ```python\n            import bitbully_databases as bbd\n\n            board = [\n                [0, 0, 0, 0, 0, 0, 0],\n                [0, 0, 0, 0, 0, 0, 0],\n                [0, 0, 1, 1, 0, 0, 0],\n                [0, 0, 2, 2, 0, 0, 0],\n                [0, 1, 2, 1, 0, 0, 0],\n                [0, 1, 1, 2, 0, 2, 2],\n            ]\n            val = bbd.BitBullyDatabases(\"12-ply-dist\").get_book_value(board)\n            print(val)  # -88 \u2192 Player 1 loses in 12 moves\n            ```\n        \"\"\"\n        if self.book is None:\n            raise ValueError(\"No database loaded; cannot get book value.\")\n        return BitBullyDatabases._get_book_value(board, self.book, with_distances=self.with_distances)\n\n    def get_book_size(self) -&gt; int | None:\n        \"\"\"Return the number of entries in the loaded book.\n\n        Returns:\n            int | None: Number of entries or `None` if no book is loaded.\n\n        Raises:\n            ValueError: If no database is loaded.\n\n        Example:\n            Retrieve the number of entries for each packaged database.\n            ```python\n            import bitbully_databases as bbd\n\n            # Default: loads the 12-ply-dist database automatically\n            db_default = bbd.BitBullyDatabases()\n            print(db_default.get_book_size())  # 4200899\n\n            # Load the 8-ply opening book\n            db8 = bbd.BitBullyDatabases(\"8-ply\")\n            print(db8.get_book_size())  # 34515\n\n            # Load the 12-ply book without distances\n            db12 = bbd.BitBullyDatabases(\"12-ply\")\n            print(db12.get_book_size())  # 1735945\n\n            # Load the 12-ply book with distances explicitly\n            db12d = bbd.BitBullyDatabases(\"12-ply-dist\")\n            print(db12d.get_book_size())  # 4200899\n            ```\n\n        Example:\n            Calling this method before loading any database raises an error.\n            ```python\n            import bitbully_databases as bbd\n\n            db = bbd.BitBullyDatabases(None)  # Explicitly skip loading\n            try:\n                db.get_book_size()\n            except ValueError as e:\n                print(e)\n                # \u2192 \"No database loaded; cannot determine book size.\"\n            ```\n        \"\"\"\n        if self.book is None:\n            raise ValueError(\"No database loaded; cannot determine book size.\")\n        return len(self.book) if self.book is not None else None\n\n    def get_book_memory_size(self) -&gt; int | None:\n        \"\"\"Return the approximate memory size of the loaded book list.\n\n        Returns:\n            int | None: Size in bytes (via :func:`sys.getsizeof`) or `None` if not loaded.\n\n        Raises:\n            ValueError: If no database is loaded.\n\n        Example:\n            Retrieve the approximate memory usage of each packaged database.\n            ```python\n            import bitbully_databases as bbd\n\n            # Default: loads the 12-ply-dist database automatically\n            db_default = bbd.BitBullyDatabases()\n            print(db_default.get_book_memory_size())\n\n            # Load the 8-ply opening book\n            db8 = bbd.BitBullyDatabases(\"8-ply\")\n            print(db8.get_book_memory_size())\n\n            # Load the 12-ply book without distances\n            db12 = bbd.BitBullyDatabases(\"12-ply\")\n            print(db12.get_book_memory_size())\n\n            # Load the 12-ply book with distances explicitly\n            db12d = bbd.BitBullyDatabases(\"12-ply-dist\")\n            print(db12d.get_book_memory_size())\n            ```\n\n        Example:\n            Calling this method before loading any database raises an error.\n            ```python\n            import bitbully_databases as bbd\n\n            db = bbd.BitBullyDatabases(None)  # Explicitly skip loading\n            try:\n                db.get_book_memory_size()\n            except ValueError as e:\n                print(e)\n                # \u2192 \"No database loaded; cannot determine book memory size.\"\n            ```\n        \"\"\"\n        if self.book is None:\n            raise ValueError(\"No database loaded; cannot determine book memory size.\")\n        return sys.getsizeof(self.book) if self.book is not None else None\n\n    def has_win_distances(self) -&gt; bool:\n        \"\"\"Indicate whether the loaded database stores winning distances (scores) separately.\n\n        Some BitBully databases store only simple win/loss outcomes\n        (-1 = loss, 0 = draw, 1 = win), while others also include\n        **signed distance values** that indicate *how many moves remain*\n        until a win or loss.\n\n        This method lets you check whether the currently loaded database\n        contains those distance values.\n\n        Returns:\n            bool:\n                `True` if the loaded database includes distance information\n                (e.g., `\"12-ply-dist\"` or `\"default\"`),\n                `False` otherwise (e.g., `\"8-ply\"` or `\"12-ply\"`).\n\n        Raises:\n            ValueError:\n                If no database is loaded.\n\n        Example:\n            Check whether the default (12-ply-dist) database contains win distances.\n            ```python\n            import bitbully_databases as bbd\n\n            db_default = bbd.BitBullyDatabases()  # default = \"12-ply-dist\"\n            print(db_default.has_win_distances())  # True\n            ```\n\n        Example:\n            Compare different databases.\n            ```python\n            import bitbully_databases as bbd\n\n            db8 = bbd.BitBullyDatabases(\"8-ply\")\n            db12 = bbd.BitBullyDatabases(\"12-ply\")\n            db12d = bbd.BitBullyDatabases(\"12-ply-dist\")\n\n            print(db8.has_win_distances())  # False\n            print(db12.has_win_distances())  # False\n            print(db12d.has_win_distances())  # True\n            ```\n\n        Example:\n            Calling this method before loading any database raises an error.\n            ```python\n            import bitbully_databases as bbd\n\n            db = bbd.BitBullyDatabases(None)  # explicitly skip loading\n            try:\n                db.has_win_distances()\n            except ValueError as e:\n                print(e)\n                # \u2192 \"No database loaded; cannot determine if it has win distances.\"\n            ```\n        \"\"\"\n        if self.book is None:\n            raise ValueError(\"No database loaded; cannot determine if it has win distances.\")\n        return self.with_distances\n\n    # ---------- Binary file reading ----------\n\n    @staticmethod\n    def _readline(f: BinaryIO, with_distances: bool, is_8ply: bool) -&gt; tuple[int | None, int | None]:\n        \"\"\"Read a single (position, score) entry; return (None, None) on EOF.\n\n        Args:\n            f (BinaryIO): Open binary file handle (positioned at the next entry).\n            with_distances (bool): Whether scores are stored in a trailing byte.\n            is_8ply (bool): Whether entries are in 3 bytes (8-ply) vs 4 bytes.\n\n        Returns:\n            tuple[int | None, int | None]: (huffman_position, score), or (None, None) at EOF.\n        \"\"\"\n        bytes_position = 3 if is_8ply else 4\n        x = f.read(bytes_position)\n        if not x:\n            return None, None  # EOF\n\n        huffman_position = int.from_bytes(x, byteorder=\"big\", signed=not is_8ply)\n        if with_distances:\n            score = int.from_bytes(f.read(1), byteorder=\"big\", signed=True)\n        else:\n            # Last two bits encode the score; convention: multiply by -1.\n            score = (huffman_position &amp; 3) * (-1)\n            huffman_position = (huffman_position // 4) * 4  # zero-out last 2 bits\n        return huffman_position, score\n\n    @staticmethod\n    def _read_book(file: Path, with_distances: bool = True, is_8ply: bool = False) -&gt; list[tuple[int, int]]:\n        \"\"\"Read the entire binary book into memory.\n\n        Args:\n            file (Path): Path to the binary book file.\n            with_distances (bool): Whether scores are stored in a separate byte.\n            is_8ply (bool): Whether entries are 3 bytes (8-ply) vs 4 bytes.\n\n        Returns:\n            list[tuple[int, int]]: List of (huffman_position, score) in ascending position order.\n        \"\"\"\n        book: list[tuple[int, int]] = []\n        with Path.open(file, \"rb\") as f:\n            while True:\n                position, score = BitBullyDatabases._readline(f, with_distances, is_8ply)\n                if position is None:\n                    break\n                if score is None:\n                    continue  # should not happen...\n                book.append((position, score))\n        return book\n\n    # ---------- Lookup helpers ----------\n\n    @staticmethod\n    def _binary_search(book: list[tuple[int, int]], huffman_position: int) -&gt; int | None:\n        \"\"\"Binary search for a position in a sorted book.\n\n        Args:\n            book (list[tuple[int, int]]): Sorted list of (position, score) pairs.\n            huffman_position (int): Target position to look up.\n\n        Returns:\n            int | None: Score if found, else None.\n        \"\"\"\n        left = 0\n        right = len(book) - 1\n        while right &gt;= left:\n            mid = (left + right + 1) // 2\n            p = book[mid][0]\n            if p == huffman_position:\n                return book[mid][1]\n            if p &gt; huffman_position:\n                right = mid - 1\n            else:\n                left = mid + 1\n        return None\n\n    # ---------- Board encoding (no NumPy) ----------\n\n    @staticmethod\n    def _dims(board: Board) -&gt; tuple[int, int]:\n        \"\"\"Return (rows, cols) and perform a minimal rectangularity check.\n\n        Args:\n            board (Board): Board matrix.\n\n        Returns:\n            tuple[int, int]: (rows, cols).\n\n        Raises:\n            ValueError: If the board has zero rows or rows with differing lengths.\n        \"\"\"\n        rows = len(board)\n        if rows == 0:\n            raise ValueError(\"Board must have at least one row.\")\n        cols = len(board[0])\n        for r in board:\n            if len(r) != cols:\n                raise ValueError(\"Board rows must all have the same length.\")\n        return rows, cols\n\n    @staticmethod\n    def _to_huffman(board: Board) -&gt; int:\n        \"\"\"Convert a board to its Huffman-encoded integer.\n\n        Iteration order:\n            Columns left\u2192right; within each column, rows bottom\u2192top.\n\n        Encoding:\n            - 0 \u2192 end-of-column sentinel (separator bit '0')\n            - 1 \u2192 player 1 token ('10')\n            - any other non-zero \u2192 player 2 token ('11')\n\n        Args:\n            board (Board): Board matrix.\n\n        Returns:\n            int: Signed 32-bit-compatible integer encoding of the board.\n        \"\"\"\n        rows, cols = BitBullyDatabases._dims(board)\n\n        bits: list[str] = [\"0b\"]\n        for c in range(cols):  # e.g., 0..6 for 7 columns\n            for r in reversed(range(rows)):  # e.g., 0..5 for 6 rows\n                v = board[r][c]\n                if v == 0:\n                    bits.append(\"0\")  # separator for end-of-column\n                    break\n                if v == 1:\n                    bits.append(\"10\")  # P1 token (2 bits)\n                else:\n                    bits.append(\"11\")  # P2 token (2 bits)\n                if r == 0:\n                    bits.append(\"0\")  # column full \u2192 still add separator\n\n        bits.append(\"0\")  # pad to full byte as original logic does\n        s = \"\".join(bits)\n        val = int(s, 2)\n        # If first payload bit is '1' and total exceeds 32 bits, adjust to signed 32-bit (two's complement).\n        if s[2] == \"1\" and len(s) &gt; 32:\n            val -= 2 &lt;&lt; 31  # 2**32\n        return val\n\n    @staticmethod\n    def _mirror_horiz(board: Board) -&gt; Board:\n        \"\"\"Return a horizontally mirrored copy of the board (flip columns).\n\n        Args:\n            board (Board): Board matrix.\n\n        Returns:\n            Board: New board matrix mirrored along the vertical axis.\n        \"\"\"\n        rows, cols = BitBullyDatabases._dims(board)\n        mirrored: Board = [[0] * cols for _ in range(rows)]\n        for r in range(rows):\n            for c in range(cols):\n                mirrored[r][cols - 1 - c] = board[r][c]\n        return mirrored\n\n    @staticmethod\n    def _get_book_value(board: Board, book: list[tuple[int, int]], with_distances: bool = True) -&gt; int | None:\n        \"\"\"Lookup score via Huffman encoding, trying both the board and its mirror.\n\n        Args:\n            board (Board): Board matrix.\n            book (list[tuple[int, int]]): Database as (position, score) pairs.\n            with_distances (bool): Whether the database stores distances separately.\n\n        Returns:\n            int | None:\n                Score for the board. If `with_distances` is False and the position is\n                not found, returns 1 (convention: P1 wins). Otherwise returns None if\n                not found.\n        \"\"\"\n        p = BitBullyDatabases._to_huffman(board)\n        val = BitBullyDatabases._binary_search(book, p)\n        if val is not None:\n            return val\n\n        p_m = BitBullyDatabases._to_huffman(BitBullyDatabases._mirror_horiz(board))\n        val = BitBullyDatabases._binary_search(book, p_m)\n\n        if not with_distances and val is None:\n            # In 8/12-ply books without distances: missing \u21d2 P1 wins\n            return 1\n        return val\n</code></pre>"},{"location":"python/#src.bitbully_databases.bitbully_databases.BitBullyDatabases.__init__","title":"<code>__init__(db_name=None)</code>","text":"<p>Initialize an instance and (optionally) load a database.</p> <p>Parameters:</p> Name Type Description Default <code>db_name</code> <code>Literal['default', '8-ply', '12-ply', '12-ply-dist'] | None</code> <p>Database to load. Accepted values: - \"default\": 12-ply with distances - \"8-ply\": 8-ply without distances - \"12-ply\": 12-ply without distances - \"12-ply-dist\": 12-ply with distances - None: do not load anything</p> <code>None</code> Source code in <code>src/bitbully_databases/bitbully_databases.py</code> <pre><code>def __init__(self, db_name: Literal[\"default\", \"8-ply\", \"12-ply\", \"12-ply-dist\"] | None = None) -&gt; None:\n    \"\"\"Initialize an instance and (optionally) load a database.\n\n    Args:\n        db_name (Literal[\"default\", \"8-ply\", \"12-ply\", \"12-ply-dist\"] | None):\n            Database to load. Accepted values:\n            - \"default\": 12-ply with distances\n            - \"8-ply\": 8-ply without distances\n            - \"12-ply\": 12-ply without distances\n            - \"12-ply-dist\": 12-ply with distances\n            - None: do not load anything\n    \"\"\"\n    self.db_name = db_name\n    self.book: list[tuple[int, int]] | None = None\n    self.with_distances: bool = False\n    if db_name is not None:\n        db_path = Path(BitBullyDatabases.get_database_path(db_name))\n        self.with_distances = db_name in [\"default\", \"12-ply-dist\"]\n        self.is_8ply = db_name == \"8-ply\"\n        self.book = BitBullyDatabases._read_book(\n            file=db_path,\n            with_distances=self.with_distances,\n            is_8ply=self.is_8ply,\n        )\n</code></pre>"},{"location":"python/#src.bitbully_databases.bitbully_databases.BitBullyDatabases.get_book_memory_size","title":"<code>get_book_memory_size()</code>","text":"<p>Return the approximate memory size of the loaded book list.</p> <p>Returns:</p> Type Description <code>int | None</code> <p>int | None: Size in bytes (via :func:<code>sys.getsizeof</code>) or <code>None</code> if not loaded.</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If no database is loaded.</p> Example <p>Retrieve the approximate memory usage of each packaged database. <pre><code>import bitbully_databases as bbd\n\n# Default: loads the 12-ply-dist database automatically\ndb_default = bbd.BitBullyDatabases()\nprint(db_default.get_book_memory_size())\n\n# Load the 8-ply opening book\ndb8 = bbd.BitBullyDatabases(\"8-ply\")\nprint(db8.get_book_memory_size())\n\n# Load the 12-ply book without distances\ndb12 = bbd.BitBullyDatabases(\"12-ply\")\nprint(db12.get_book_memory_size())\n\n# Load the 12-ply book with distances explicitly\ndb12d = bbd.BitBullyDatabases(\"12-ply-dist\")\nprint(db12d.get_book_memory_size())\n</code></pre></p> Example <p>Calling this method before loading any database raises an error. <pre><code>import bitbully_databases as bbd\n\ndb = bbd.BitBullyDatabases(None)  # Explicitly skip loading\ntry:\n    db.get_book_memory_size()\nexcept ValueError as e:\n    print(e)\n    # \u2192 \"No database loaded; cannot determine book memory size.\"\n</code></pre></p> Source code in <code>src/bitbully_databases/bitbully_databases.py</code> <pre><code>def get_book_memory_size(self) -&gt; int | None:\n    \"\"\"Return the approximate memory size of the loaded book list.\n\n    Returns:\n        int | None: Size in bytes (via :func:`sys.getsizeof`) or `None` if not loaded.\n\n    Raises:\n        ValueError: If no database is loaded.\n\n    Example:\n        Retrieve the approximate memory usage of each packaged database.\n        ```python\n        import bitbully_databases as bbd\n\n        # Default: loads the 12-ply-dist database automatically\n        db_default = bbd.BitBullyDatabases()\n        print(db_default.get_book_memory_size())\n\n        # Load the 8-ply opening book\n        db8 = bbd.BitBullyDatabases(\"8-ply\")\n        print(db8.get_book_memory_size())\n\n        # Load the 12-ply book without distances\n        db12 = bbd.BitBullyDatabases(\"12-ply\")\n        print(db12.get_book_memory_size())\n\n        # Load the 12-ply book with distances explicitly\n        db12d = bbd.BitBullyDatabases(\"12-ply-dist\")\n        print(db12d.get_book_memory_size())\n        ```\n\n    Example:\n        Calling this method before loading any database raises an error.\n        ```python\n        import bitbully_databases as bbd\n\n        db = bbd.BitBullyDatabases(None)  # Explicitly skip loading\n        try:\n            db.get_book_memory_size()\n        except ValueError as e:\n            print(e)\n            # \u2192 \"No database loaded; cannot determine book memory size.\"\n        ```\n    \"\"\"\n    if self.book is None:\n        raise ValueError(\"No database loaded; cannot determine book memory size.\")\n    return sys.getsizeof(self.book) if self.book is not None else None\n</code></pre>"},{"location":"python/#src.bitbully_databases.bitbully_databases.BitBullyDatabases.get_book_size","title":"<code>get_book_size()</code>","text":"<p>Return the number of entries in the loaded book.</p> <p>Returns:</p> Type Description <code>int | None</code> <p>int | None: Number of entries or <code>None</code> if no book is loaded.</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If no database is loaded.</p> Example <p>Retrieve the number of entries for each packaged database. <pre><code>import bitbully_databases as bbd\n\n# Default: loads the 12-ply-dist database automatically\ndb_default = bbd.BitBullyDatabases()\nprint(db_default.get_book_size())  # 4200899\n\n# Load the 8-ply opening book\ndb8 = bbd.BitBullyDatabases(\"8-ply\")\nprint(db8.get_book_size())  # 34515\n\n# Load the 12-ply book without distances\ndb12 = bbd.BitBullyDatabases(\"12-ply\")\nprint(db12.get_book_size())  # 1735945\n\n# Load the 12-ply book with distances explicitly\ndb12d = bbd.BitBullyDatabases(\"12-ply-dist\")\nprint(db12d.get_book_size())  # 4200899\n</code></pre></p> Example <p>Calling this method before loading any database raises an error. <pre><code>import bitbully_databases as bbd\n\ndb = bbd.BitBullyDatabases(None)  # Explicitly skip loading\ntry:\n    db.get_book_size()\nexcept ValueError as e:\n    print(e)\n    # \u2192 \"No database loaded; cannot determine book size.\"\n</code></pre></p> Source code in <code>src/bitbully_databases/bitbully_databases.py</code> <pre><code>def get_book_size(self) -&gt; int | None:\n    \"\"\"Return the number of entries in the loaded book.\n\n    Returns:\n        int | None: Number of entries or `None` if no book is loaded.\n\n    Raises:\n        ValueError: If no database is loaded.\n\n    Example:\n        Retrieve the number of entries for each packaged database.\n        ```python\n        import bitbully_databases as bbd\n\n        # Default: loads the 12-ply-dist database automatically\n        db_default = bbd.BitBullyDatabases()\n        print(db_default.get_book_size())  # 4200899\n\n        # Load the 8-ply opening book\n        db8 = bbd.BitBullyDatabases(\"8-ply\")\n        print(db8.get_book_size())  # 34515\n\n        # Load the 12-ply book without distances\n        db12 = bbd.BitBullyDatabases(\"12-ply\")\n        print(db12.get_book_size())  # 1735945\n\n        # Load the 12-ply book with distances explicitly\n        db12d = bbd.BitBullyDatabases(\"12-ply-dist\")\n        print(db12d.get_book_size())  # 4200899\n        ```\n\n    Example:\n        Calling this method before loading any database raises an error.\n        ```python\n        import bitbully_databases as bbd\n\n        db = bbd.BitBullyDatabases(None)  # Explicitly skip loading\n        try:\n            db.get_book_size()\n        except ValueError as e:\n            print(e)\n            # \u2192 \"No database loaded; cannot determine book size.\"\n        ```\n    \"\"\"\n    if self.book is None:\n        raise ValueError(\"No database loaded; cannot determine book size.\")\n    return len(self.book) if self.book is not None else None\n</code></pre>"},{"location":"python/#src.bitbully_databases.bitbully_databases.BitBullyDatabases.get_book_value","title":"<code>get_book_value(board)</code>","text":"<p>Retrieve the score for a given board position.</p> Note <p>Pure-Python lookup is for demonstration; prefer the C++/pybind11 API for performance.</p> <p>Parameters:</p> Name Type Description Default <code>board</code> <code>Board</code> <p>Board matrix shaped rows x cols (e.g., 6 x 7). Entries: 0=end-of-column sentinel when scanning bottom\u2192top, 1=player1, else=player2.</p> required <p>Returns:</p> Type Description <code>int | None</code> <p>int | None: Score from the book. If the database stores distances (<code>with_distances=True</code>), returns the stored signed distance or <code>None</code> if the position is not present. If it does not store distances, returns 1 when the position is not present (convention: P1 wins) or the stored value if present.</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If no database is loaded.</p> Example <p>Example 1 \u2014 12-ply-dist (Player 1 wins in 29 moves): <pre><code>import bitbully_databases as bbd\n\n# Example position: a known position in the 12-ply and 12-ply-dist opening books\n# Expected score is 71 for player 1 (yellow, X) to win in (100-71) = 29 moves\nboard = [\n    [0, 0, 0, 0, 0, 0, 0],  #\n    [0, 0, 0, 1, 0, 0, 0],  #\n    [0, 1, 0, 2, 0, 0, 0],  #\n    [0, 2, 0, 1, 0, 2, 0],  #\n    [0, 1, 0, 2, 0, 1, 0],  #\n    [0, 2, 0, 1, 0, 2, 0],  #\n]\nexpected_value = 71\nval = bbd.BitBullyDatabases(db_name=\"12-ply-dist\").get_book_value(board)\nassert val == expected_value\n</code></pre></p> Example <p>Example 2 \u2014 8-ply (Basic win/loss database) <pre><code>import bitbully_databases as bbd\n\nboard = [\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 1, 0, 0, 0],\n    [0, 0, 0, 2, 0, 0, 0],\n    [0, 2, 0, 1, 0, 0, 0],\n    [0, 1, 0, 2, 0, 0, 0],\n    [0, 2, 0, 1, 0, 0, 0],\n]\nval = bbd.BitBullyDatabases(\"8-ply\").get_book_value(board)\nprint(val)  # 1 \u2192 Player 1 wins\n</code></pre></p> Example <p>Example 3 \u2014 8-ply (Draw position) <pre><code>import bitbully_databases as bbd\n\nboard = [\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 2, 0, 0, 0],\n    [0, 0, 0, 1, 0, 0, 0],\n    [0, 0, 0, 2, 0, 0, 0],\n    [0, 0, 0, 1, 0, 2, 0],\n    [0, 0, 1, 2, 0, 1, 0],\n]\nval = bbd.BitBullyDatabases(\"8-ply\").get_book_value(board)\nprint(val)  # 0 \u2192 Draw\n</code></pre></p> Example <p>Example 4 \u2014 12-ply (Draw position) <pre><code>import bitbully_databases as bbd\n\nboard = [\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 1, 1, 0, 0, 0],\n    [0, 0, 2, 2, 0, 0, 0],\n    [0, 0, 2, 1, 2, 0, 0],\n    [0, 1, 1, 2, 1, 2, 0],\n]\nval = bbd.BitBullyDatabases(\"12-ply\").get_book_value(board)\nprint(val)  # 0 \u2192 Draw\n</code></pre></p> Example <p>Example 5 \u2014 12-ply-dist (Player 1 wins in 27 moves) <pre><code>import bitbully_databases as bbd\n\nboard = [\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 1, 0, 0, 0, 0, 0],\n    [0, 2, 2, 0, 1, 0, 0],\n    [0, 2, 1, 0, 2, 0, 0],\n    [1, 1, 2, 1, 2, 0, 0],\n]\nval = bbd.BitBullyDatabases(\"12-ply-dist\").get_book_value(board)\nprint(val)  # 73 \u2192 Player 1 wins in 27 moves\n</code></pre></p> Example <p>Example 6 \u2014 12-ply-dist (Player 1 loses in 12 moves) <pre><code>import bitbully_databases as bbd\n\nboard = [\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 1, 1, 0, 0, 0],\n    [0, 0, 2, 2, 0, 0, 0],\n    [0, 1, 2, 1, 0, 0, 0],\n    [0, 1, 1, 2, 0, 2, 2],\n]\nval = bbd.BitBullyDatabases(\"12-ply-dist\").get_book_value(board)\nprint(val)  # -88 \u2192 Player 1 loses in 12 moves\n</code></pre></p> Source code in <code>src/bitbully_databases/bitbully_databases.py</code> <pre><code>def get_book_value(self, board: Board) -&gt; int | None:\n    \"\"\"Retrieve the score for a given board position.\n\n    Note:\n        Pure-Python lookup is for demonstration; prefer the C++/pybind11 API for performance.\n\n    Args:\n        board (Board):\n            Board matrix shaped rows x cols (e.g., 6 x 7). Entries:\n            0=end-of-column sentinel when scanning bottom\u2192top, 1=player1, else=player2.\n\n    Returns:\n        int | None:\n            Score from the book. If the database stores distances\n            (`with_distances=True`), returns the stored signed distance or `None`\n            if the position is not present. If it does *not* store distances,\n            returns 1 when the position is not present (convention: P1 wins)\n            or the stored value if present.\n\n    Raises:\n        ValueError: If no database is loaded.\n\n    Example:\n        **Example 1 \u2014 12-ply-dist (Player 1 wins in 29 moves):**\n        ```python\n        import bitbully_databases as bbd\n\n        # Example position: a known position in the 12-ply and 12-ply-dist opening books\n        # Expected score is 71 for player 1 (yellow, X) to win in (100-71) = 29 moves\n        board = [\n            [0, 0, 0, 0, 0, 0, 0],  #\n            [0, 0, 0, 1, 0, 0, 0],  #\n            [0, 1, 0, 2, 0, 0, 0],  #\n            [0, 2, 0, 1, 0, 2, 0],  #\n            [0, 1, 0, 2, 0, 1, 0],  #\n            [0, 2, 0, 1, 0, 2, 0],  #\n        ]\n        expected_value = 71\n        val = bbd.BitBullyDatabases(db_name=\"12-ply-dist\").get_book_value(board)\n        assert val == expected_value\n        ```\n\n    Example:\n        **Example 2 \u2014 8-ply (Basic win/loss database)**\n        ```python\n        import bitbully_databases as bbd\n\n        board = [\n            [0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 1, 0, 0, 0],\n            [0, 0, 0, 2, 0, 0, 0],\n            [0, 2, 0, 1, 0, 0, 0],\n            [0, 1, 0, 2, 0, 0, 0],\n            [0, 2, 0, 1, 0, 0, 0],\n        ]\n        val = bbd.BitBullyDatabases(\"8-ply\").get_book_value(board)\n        print(val)  # 1 \u2192 Player 1 wins\n        ```\n\n    Example:\n        **Example 3 \u2014 8-ply (Draw position)**\n        ```python\n        import bitbully_databases as bbd\n\n        board = [\n            [0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 2, 0, 0, 0],\n            [0, 0, 0, 1, 0, 0, 0],\n            [0, 0, 0, 2, 0, 0, 0],\n            [0, 0, 0, 1, 0, 2, 0],\n            [0, 0, 1, 2, 0, 1, 0],\n        ]\n        val = bbd.BitBullyDatabases(\"8-ply\").get_book_value(board)\n        print(val)  # 0 \u2192 Draw\n        ```\n\n    Example:\n        **Example 4 \u2014 12-ply (Draw position)**\n        ```python\n        import bitbully_databases as bbd\n\n        board = [\n            [0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 1, 1, 0, 0, 0],\n            [0, 0, 2, 2, 0, 0, 0],\n            [0, 0, 2, 1, 2, 0, 0],\n            [0, 1, 1, 2, 1, 2, 0],\n        ]\n        val = bbd.BitBullyDatabases(\"12-ply\").get_book_value(board)\n        print(val)  # 0 \u2192 Draw\n        ```\n\n    Example:\n        **Example 5 \u2014 12-ply-dist (Player 1 wins in 27 moves)**\n        ```python\n        import bitbully_databases as bbd\n\n        board = [\n            [0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0, 0],\n            [0, 1, 0, 0, 0, 0, 0],\n            [0, 2, 2, 0, 1, 0, 0],\n            [0, 2, 1, 0, 2, 0, 0],\n            [1, 1, 2, 1, 2, 0, 0],\n        ]\n        val = bbd.BitBullyDatabases(\"12-ply-dist\").get_book_value(board)\n        print(val)  # 73 \u2192 Player 1 wins in 27 moves\n        ```\n\n    Example:\n        **Example 6 \u2014 12-ply-dist (Player 1 loses in 12 moves)**\n        ```python\n        import bitbully_databases as bbd\n\n        board = [\n            [0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 1, 1, 0, 0, 0],\n            [0, 0, 2, 2, 0, 0, 0],\n            [0, 1, 2, 1, 0, 0, 0],\n            [0, 1, 1, 2, 0, 2, 2],\n        ]\n        val = bbd.BitBullyDatabases(\"12-ply-dist\").get_book_value(board)\n        print(val)  # -88 \u2192 Player 1 loses in 12 moves\n        ```\n    \"\"\"\n    if self.book is None:\n        raise ValueError(\"No database loaded; cannot get book value.\")\n    return BitBullyDatabases._get_book_value(board, self.book, with_distances=self.with_distances)\n</code></pre>"},{"location":"python/#src.bitbully_databases.bitbully_databases.BitBullyDatabases.get_database_path","title":"<code>get_database_path(db_name='default')</code>  <code>staticmethod</code>","text":"<p>Return the packaged file path for a given database name.</p> <p>Parameters:</p> Name Type Description Default <code>db_name</code> <code>Literal['default', '8-ply', '12-ply', '12-ply-dist']</code> <p>Database identifier.</p> <code>'default'</code> <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>Absolute path to the packaged binary database file.</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If <code>db_name</code> is not one of the supported values.</p> Example <pre><code>import bitbully_databases as bbd\n\ndb_path = bbd.BitBullyDatabases.get_database_path(\"12-ply-dist\")\nprint(db_path)\n# Outputs the absolute path to 'book_12ply_distances.dat'\n</code></pre> Source code in <code>src/bitbully_databases/bitbully_databases.py</code> <pre><code>@staticmethod\ndef get_database_path(db_name: Literal[\"default\", \"8-ply\", \"12-ply\", \"12-ply-dist\"] = \"default\") -&gt; str:\n    \"\"\"Return the packaged file path for a given database name.\n\n    Args:\n        db_name (Literal[\"default\", \"8-ply\", \"12-ply\", \"12-ply-dist\"]):\n            Database identifier.\n\n    Returns:\n        str: Absolute path to the packaged binary database file.\n\n    Raises:\n        ValueError: If `db_name` is not one of the supported values.\n\n    Example:\n        ```python\n        import bitbully_databases as bbd\n\n        db_path = bbd.BitBullyDatabases.get_database_path(\"12-ply-dist\")\n        print(db_path)\n        # Outputs the absolute path to 'book_12ply_distances.dat'\n        ```\n    \"\"\"\n    if db_name == \"default\":\n        db_path = files(\"bitbully_databases\").joinpath(\"assets/book_12ply_distances.dat\")\n    elif db_name == \"8-ply\":\n        db_path = files(\"bitbully_databases\").joinpath(\"assets/book_8ply.dat\")\n    elif db_name == \"12-ply\":\n        db_path = files(\"bitbully_databases\").joinpath(\"assets/book_12ply.dat\")\n    elif db_name == \"12-ply-dist\":\n        db_path = files(\"bitbully_databases\").joinpath(\"assets/book_12ply_distances.dat\")\n    else:\n        raise ValueError(\n            f\"Unknown database name: {db_name}. Allowed: Literal['default','8-ply','12-ply','12-ply-dist']\"\n        )\n    with as_file(db_path) as f:\n        return str(f)\n</code></pre>"},{"location":"python/#src.bitbully_databases.bitbully_databases.BitBullyDatabases.has_win_distances","title":"<code>has_win_distances()</code>","text":"<p>Indicate whether the loaded database stores winning distances (scores) separately.</p> <p>Some BitBully databases store only simple win/loss outcomes (-1 = loss, 0 = draw, 1 = win), while others also include signed distance values that indicate how many moves remain until a win or loss.</p> <p>This method lets you check whether the currently loaded database contains those distance values.</p> <p>Returns:</p> Name Type Description <code>bool</code> <code>bool</code> <p><code>True</code> if the loaded database includes distance information (e.g., <code>\"12-ply-dist\"</code> or <code>\"default\"</code>), <code>False</code> otherwise (e.g., <code>\"8-ply\"</code> or <code>\"12-ply\"</code>).</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If no database is loaded.</p> Example <p>Check whether the default (12-ply-dist) database contains win distances. <pre><code>import bitbully_databases as bbd\n\ndb_default = bbd.BitBullyDatabases()  # default = \"12-ply-dist\"\nprint(db_default.has_win_distances())  # True\n</code></pre></p> Example <p>Compare different databases. <pre><code>import bitbully_databases as bbd\n\ndb8 = bbd.BitBullyDatabases(\"8-ply\")\ndb12 = bbd.BitBullyDatabases(\"12-ply\")\ndb12d = bbd.BitBullyDatabases(\"12-ply-dist\")\n\nprint(db8.has_win_distances())  # False\nprint(db12.has_win_distances())  # False\nprint(db12d.has_win_distances())  # True\n</code></pre></p> Example <p>Calling this method before loading any database raises an error. <pre><code>import bitbully_databases as bbd\n\ndb = bbd.BitBullyDatabases(None)  # explicitly skip loading\ntry:\n    db.has_win_distances()\nexcept ValueError as e:\n    print(e)\n    # \u2192 \"No database loaded; cannot determine if it has win distances.\"\n</code></pre></p> Source code in <code>src/bitbully_databases/bitbully_databases.py</code> <pre><code>def has_win_distances(self) -&gt; bool:\n    \"\"\"Indicate whether the loaded database stores winning distances (scores) separately.\n\n    Some BitBully databases store only simple win/loss outcomes\n    (-1 = loss, 0 = draw, 1 = win), while others also include\n    **signed distance values** that indicate *how many moves remain*\n    until a win or loss.\n\n    This method lets you check whether the currently loaded database\n    contains those distance values.\n\n    Returns:\n        bool:\n            `True` if the loaded database includes distance information\n            (e.g., `\"12-ply-dist\"` or `\"default\"`),\n            `False` otherwise (e.g., `\"8-ply\"` or `\"12-ply\"`).\n\n    Raises:\n        ValueError:\n            If no database is loaded.\n\n    Example:\n        Check whether the default (12-ply-dist) database contains win distances.\n        ```python\n        import bitbully_databases as bbd\n\n        db_default = bbd.BitBullyDatabases()  # default = \"12-ply-dist\"\n        print(db_default.has_win_distances())  # True\n        ```\n\n    Example:\n        Compare different databases.\n        ```python\n        import bitbully_databases as bbd\n\n        db8 = bbd.BitBullyDatabases(\"8-ply\")\n        db12 = bbd.BitBullyDatabases(\"12-ply\")\n        db12d = bbd.BitBullyDatabases(\"12-ply-dist\")\n\n        print(db8.has_win_distances())  # False\n        print(db12.has_win_distances())  # False\n        print(db12d.has_win_distances())  # True\n        ```\n\n    Example:\n        Calling this method before loading any database raises an error.\n        ```python\n        import bitbully_databases as bbd\n\n        db = bbd.BitBullyDatabases(None)  # explicitly skip loading\n        try:\n            db.has_win_distances()\n        except ValueError as e:\n            print(e)\n            # \u2192 \"No database loaded; cannot determine if it has win distances.\"\n        ```\n    \"\"\"\n    if self.book is None:\n        raise ValueError(\"No database loaded; cannot determine if it has win distances.\")\n    return self.with_distances\n</code></pre>"}]}